#!/usr/bin/env node
/**
 * Test News System - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
 */

const fs = require('fs');
const path = require('path');

console.log('üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –ú–∞—Ä–≥—É–ª–∞–Ω–∞...\n');

// 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
console.log('üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:');
const configFiles = [
  'USER.md',
  'news-config.md', 
  'rss-feeds.md',
  'telegram-channels.md',
  'news-state.json'
];

configFiles.forEach(file => {
  const exists = fs.existsSync(file);
  console.log(`  ${exists ? '‚úÖ' : '‚ùå'} ${file}`);
});

// 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤
console.log('\nüîß –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤:');
const scripts = [
  'news-aggregator.js',
  'news-collector.py', 
  'news-digest-generator.sh'
];

scripts.forEach(script => {
  const exists = fs.existsSync(script);
  const isExecutable = exists && fs.statSync(script).mode & 0o111;
  console.log(`  ${exists ? '‚úÖ' : '‚ùå'} ${script} ${isExecutable ? '(–∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π)' : ''}`);
});

// 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ cron –∑–∞–¥–∞—á
console.log('\n‚è∞ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–π–¥–∂–µ—Å—Ç—ã:');
console.log('  üåÖ 08:00 UTC - –£—Ç—Ä–µ–Ω–Ω–∏–π –¥–∞–π–¥–∂–µ—Å—Ç');  
console.log('  ‚òÄÔ∏è 13:00 UTC - –î–Ω–µ–≤–Ω–æ–π –¥–∞–π–¥–∂–µ—Å—Ç');
console.log('  üåÜ 18:00 UTC - –í–µ—á–µ—Ä–Ω–∏–π –¥–∞–π–¥–∂–µ—Å—Ç');

// 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤
console.log('\nüìä –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:');
const interests = [
  'ü§ñ –ò–ò –∏ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ',
  'ü¶æ –†–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–∞', 
  '‚úàÔ∏è eVTOL –∏ –¥—Ä–æ–Ω—ã',
  'üíº –ë–∏–∑–Ω–µ—Å –∏ —Å—Ç–∞—Ä—Ç–∞–ø—ã',
  'üõ† –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –ª–∞–π—Ñ—Ö–∞–∫–∏'
];

interests.forEach(interest => {
  console.log(`  ‚úÖ ${interest}`);
});

// 5. –¢–µ—Å—Ç —Å–∫–æ—Ä–∏–Ω–≥–∞ –Ω–æ–≤–æ—Å—Ç–µ–π
console.log('\nüéØ –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã —Å–∫–æ—Ä–∏–Ω–≥–∞:');
const testArticles = [
  {
    title: "OpenAI releases GPT-5 with robotics integration",
    score: 15 // AI + robotics
  },
  {
    title: "New eVTOL startup raises $50M Series A", 
    score: 12 // eVTOL + funding
  },
  {
    title: "Boston Dynamics robot learns to code",
    score: 13 // Robotics + AI
  },
  {
    title: "Random tech news",
    score: 3 // Low relevance
  }
];

testArticles.forEach(article => {
  const relevant = article.score >= 5;
  console.log(`  ${relevant ? '‚úÖ' : '‚ö†Ô∏è'} "${article.title}" (score: ${article.score})`);
});

console.log('\nüéâ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!');
console.log('\nüìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:');
console.log('  1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Brave Search API –¥–ª—è –≤–µ–±-–ø–æ–∏—Å–∫–∞');
console.log('  2. –î–æ–±–∞–≤–∏—Ç—å RSS –ø–∞—Ä—Å–∏–Ω–≥');  
console.log('  3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Telegram –∫–∞–Ω–∞–ª—ã');
console.log('  4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –¥–∞–π–¥–∂–µ—Å—Ç');

console.log('\nüöÄ –ì–æ—Ç–æ–≤ —Å–æ–±—Ä–∞—Ç—å –ø–µ—Ä–≤—ã–π –¥–∞–π–¥–∂–µ—Å—Ç? –ó–∞–ø—É—Å—Ç–∏:');
console.log('  node test-news-system.js --run-digest');

// –ï—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω —Å —Ñ–ª–∞–≥–æ–º, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –¥–∞–π–¥–∂–µ—Å—Ç
if (process.argv.includes('--run-digest')) {
  console.log('\nüîÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –¥–∞–π–¥–∂–µ—Å—Ç–∞...');
  
  const testDigest = `üì∞ **–¢–µ—Å—Ç–æ–≤—ã–π –î–∞–π–¥–∂–µ—Å—Ç** - ${new Date().toLocaleDateString('ru-RU')}

ü§ñ **–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç:**
‚Ä¢ OpenAI –∞–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–ª–∞ GPT-5 —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç–∏
‚Ä¢ Google Bard –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å —Ä–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏  
‚Ä¢ Anthropic –≤—ã–ø—É—Å—Ç–∏–ª–∞ Claude 3.5 –¥–ª—è –±–∏–∑–Ω–µ—Å-–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

‚úàÔ∏è **eVTOL –∏ –î—Ä–æ–Ω—ã:**  
‚Ä¢ Joby Aviation –ø–æ–ª—É—á–∏–ª–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é FAA –¥–ª—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø–æ–ª–µ—Ç–æ–≤
‚Ä¢ –ù–æ–≤–∞—è —Å–ª—É–∂–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –¥—Ä–æ–Ω–∞–º–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ
‚Ä¢ Archer –∑–∞–≤–µ—Ä—à–∏–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –≥–æ—Ä–æ–¥—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö

üíº **–ë–∏–∑–Ω–µ—Å –∏ –°—Ç–∞—Ä—Ç–∞–ø—ã:**
‚Ä¢ YC Demo Day: 15 AI-—Å—Ç–∞—Ä—Ç–∞–ø–æ–≤ –ø—Ä–∏–≤–ª–µ–∫–ª–∏ $200M
‚Ä¢ –ù–æ–≤—ã–π —Ñ–æ–Ω–¥ $500M –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚Ä¢ –ü—Ä–æ–¥—É–∫—Ç–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è no-code —Ä–µ—à–µ–Ω–∏–π –≤—ã—à–ª–∞ –∏–∑ —Å—Ç–µ–ª—Å-—Ä–µ–∂–∏–º–∞

üõ† **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –õ–∞–π—Ñ—Ö–∞–∫–∏:**
‚Ä¢ Notion AI –¥–æ–±–∞–≤–∏–ª —Ñ—É–Ω–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è  
‚Ä¢ Zapier –∑–∞–ø—É—Å—Ç–∏–ª AI-–ø–æ–º–æ—â–Ω–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π
‚Ä¢ –ù–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≤–∞–π–±–∫–æ–¥–∏–Ω–≥–∞ —Å –ò–ò-–ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏

---
_–ù–æ–≤–æ—Å—Ç–Ω–æ–π –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –ù–µ–π—Ä–æ–Ω üß† | –°–∏—Å—Ç–µ–º–∞ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ_`;

  console.log('\n' + testDigest);
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –¥–∞–π–¥–∂–µ—Å—Ç
  const testFile = `test-digest-${Date.now()}.md`;
  fs.writeFileSync(testFile, testDigest);
  console.log(`\nüíæ –¢–µ—Å—Ç–æ–≤—ã–π –¥–∞–π–¥–∂–µ—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω: ${testFile}`);
}