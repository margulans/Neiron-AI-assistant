# HEARTBEAT.md

## –°–∏—Å—Ç–µ–º–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç
1. **Cron Health:** –ü—Ä–æ–≤–µ—Ä—å `cron(action=list)`, –Ω–µ—Ç –ª–∏ –ø—Ä–æ–ø—É—Å–∫–æ–≤ (lastRunAtMs).
2. **Git Sync:** –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã ‚Äî `git commit`.
3. **News Pulse:** –ï—Å–ª–∏ –Ω–µ –≤—Ä–µ–º—è –¥–∞–π–¥–∂–µ—Å—Ç–∞, –Ω–æ –µ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ –ò–ò/eVTOL ‚Äî —É–≤–µ–¥–æ–º—å.

## ‚öïÔ∏è –ê–≤–∏—Ü–µ–Ω–Ω–∞ (–†–∞–∑ –≤ 7 –¥–Ω–µ–π)
- –ü—Ä–æ–≤–µ—Ä—å `skills/avicenna/data/schedule.md` –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç —á–µ–∫–∞–ø–æ–≤ (‚â§14 –¥–Ω–µ–π).
- –ü—Ä–æ–≤–µ—Ä—å `medications.md` ‚Äî –Ω–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –ª–∏ –∫—É—Ä—Å (‚â§7 –¥–Ω–µ–π).
- –†–∞–∑ –≤ 30 –¥–Ω–µ–π: –ø—Ä–æ–≤–µ—Ä—å –¥–∞—Ç—É –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∞–Ω–∞–ª–∏–∑–æ–≤ –≤ `checkups.md`.

## –ü—Ä–∞–≤–∏–ª–∞ —Ç–∏—à–∏–Ω—ã
- **23:00 - 08:00 (–ê–ª–º–∞—Ç—ã):** –¢–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–µ—Ä—Ç—ã.
- **–í–æ –≤—Ä–µ–º—è –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤:** –ü—Ä–æ–ø—É—Å–∫–∞–π —Ä—É—Ç–∏–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ heartbeat.

–î–µ—Ç–∞–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ ‚Äî –≤ `docs/protocols/digest-operations.md`.

---

## üö® Incident Scanner

–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π hourly cron job (`üîç Incident Scanner`, `0 * * * *`, id: `b72fece5`).
–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é –∏–∑ heartbeat –ø—Ä–∏ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–∏ –Ω–∞ —Å–±–æ–π.

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å

1. **Gateway —Å—Ç–∞—Ç—É—Å** ‚Äî `systemctl --user is-active openclaw-gateway`
   - –ï—Å–ª–∏ –Ω–µ `active` ‚Üí severity=critical
2. **Cron jobs ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø—É—Å–∫–∏** ‚Äî –ø—Ä–æ–≤–µ—Ä—å `cron list` –∏–ª–∏ `cron runs` –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 —á–∞—Å–∞
   - –ï—Å–ª–∏ –ª—é–±–æ–π job –∏–º–µ–µ—Ç `status: skipped` –∏–ª–∏ `status: error` ‚Üí severity=critical
   - –ï—Å–ª–∏ backup job —Å—Ä–∞–±–æ—Ç–∞–ª (–æ—Å–Ω–æ–≤–Ω–æ–π —É–ø–∞–ª) ‚Üí severity=warn
3. **–î–∏—Å–∫** ‚Äî `df -h /` ‚Üí –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ >85% ‚Üí severity=warn

### –§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–∏ –≤ `data/incidents.jsonl` (append-only)

```json
{"ts":"<ISO8601>","type":"<—Ç–∏–ø>","job":"<id –∏–ª–∏ name>","severity":"critical|warn|info","msg":"<–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ>"}
```

–¢–∏–ø—ã (`type`): `gateway_down`, `cron_skip`, `cron_error`, `backup_triggered`, `disk_warn`

### –ü—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–∞

- `severity=critical` ‚Üí –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–ª–µ—Ä—Ç –ú–∞—Ä–≥—É–ª–∞–Ω—É –≤ Telegram
- `severity=warn` ‚Üí –∑–∞–ø–∏—Å–∞—Ç—å –≤ JSONL, –Ω–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å (–µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è 3+ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥)
- Quiet hours (23:00‚Äì06:00 UTC): —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—å –≤ JSONL, –±–µ–∑ –∞–ª–µ—Ä—Ç–æ–≤ –¥–∞–∂–µ –¥–ª—è critical

### –ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```
1. –í—ã–ø–æ–ª–Ω–∏ –≤—Å–µ 3 –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã—à–µ
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞:
   a. –°—Ñ–æ—Ä–º–∏—Ä—É–π JSON-—Å—Ç—Ä–æ–∫—É
   b. Append –≤ data/incidents.jsonl (–æ—Ç–∫—Ä–æ–π —Ñ–∞–π–ª, –¥–æ–±–∞–≤—å —Å—Ç—Ä–æ–∫—É –≤ –∫–æ–Ω–µ—Ü)
   c. –ï—Å–ª–∏ severity=critical –∏ –Ω–µ quiet hours ‚Üí –æ—Ç–ø—Ä–∞–≤—å –∞–ª–µ—Ä—Ç
3. –ï—Å–ª–∏ –≤—Å—ë OK ‚Üí –∑–∞–ø–∏—à–∏ {"ts":"...","type":"ok","severity":"info","msg":"system healthy"}
4. git add data/incidents.jsonl && git commit -m "chore: incident scan <–¥–∞—Ç–∞>" && git push
```

### –ü—Ä–∏–º–µ—Ä –∞–ª–µ—Ä—Ç–∞ (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ)

```
üö® –ò–Ω—Ü–∏–¥–µ–Ω—Ç: –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–µ—Ñ–ª–µ–∫—Å–∏—è –ø—Ä–æ–ø—É—â–µ–Ω–∞
–¢–∏–ø: cron_skip | Job: 9d558661 | 2026-02-22 21:30 UTC+6
–ñ—É—Ä–Ω–∞–ª: data/incidents.jsonl
```
